# Exploração AWS com Pacu Framework

## O que é Pacu?

**Pacu** é uma estrutura de exploração de AWS de código aberto, projetada para testes de segurança ofensiva em ambientes de nuvem. Criado e mantido pela Rhino Security Labs, o Pacu permite que testadores de penetração explorem falhas de configuração em uma conta AWS, usando módulos para expandir facilmente sua funcionalidade. Os módulos atuais permitem uma variedade de ataques, incluindo escalonamento de privilégios de usuário, backdoor de usuários IAM, ataque a funções Lambda vulneráveis e muito mais.

## Instalação

O Pacu é um programa relativamente leve, pois requer apenas Python 3.7+ e pip3 para instalar algumas bibliotecas Python.

### Instalação Rápida

```python
pip3 install -U pip
pip3 install -U pacu
pacu
```

## Primeiros Passos

Na primeira vez que o Pacu for iniciado, você será solicitado a iniciar e nomear uma nova sessão. Esta sessão será usada para armazenar pares de chaves AWS, bem como quaisquer dados obtidos a partir da execução de vários módulos. Você pode ter qualquer número de sessões diferentes no Pacu, cada uma com seus próprios conjuntos de chaves e dados AWS, e retomar uma sessão a qualquer momento (embora seja necessário reiniciar para alternar entre sessões).

Os módulos requerem uma chave AWS, que concede acesso mínimo a um ambiente AWS e é composta por um ID de chave de acesso e uma chave de acesso secreta. Para definir as chaves da sua sessão, use o comando `set_keys` e siga as instruções para fornecer um alias de chave (apelido para referência), um ID de chave de acesso AWS, uma chave de acesso secreta AWS e um token de sessão AWS (se você estiver usando um).

Se você ficar preso, `help` trará uma lista de comandos disponíveis.

## Comandos Básicos no Pacu

- `list` listará os módulos disponíveis para as regiões que foram definidas na sessão atual.
- `help module_name` retornará as informações de ajuda aplicáveis para o módulo especificado.
- `run module_name` executará o módulo especificado com seus parâmetros padrão.
- `run module_name --regions eu-west-1,us-west-1` executará o módulo especificado nas regiões `eu-west-1` e `us-west-1` (para módulos que suportam o argumento `--regions`).

## Executando o Pacu a partir da CLI

- `pacu --help` exibirá o menu de ajuda.
- `pacu --session <session name>` define a sessão a ser usada para comandos que requerem uma.
- `pacu --list-modules` listará todos os módulos disponíveis (não requer sessão).
- `pacu --pacu-help` listará a janela de ajuda do Pacu (não requer sessão).
- `pacu --module-name <module name>` o nome de um módulo para realizar uma ação, você pode executar ou obter informações sobre o módulo.
- `pacu --exec` executa o módulo fornecido em `--module-name`.
- `pacu --module-info` obtém informações sobre o módulo fornecido em `--module-name`.
- `pacu --data <service name || all>` consulta o banco de dados local SQLAlchemy para recuperar informações enumeradas.
- `pacu --module-args="<arg1> <value> <arg2> <value>"` fornece argumentos opcionais do módulo para o módulo sendo executado.
- `pacu --set-regions <region1 region2 || all>` define as regiões a serem usadas na sessão, separe as regiões por um espaço ou insira `all` para todas as regiões.
- `pacu --whoami` obtém informações sobre o usuário atual.

## Poder Modular do Pacu

O Pacu usa uma variedade de módulos plug-in para auxiliar um atacante na enumeração, escalonamento de privilégios, exfiltração de dados, exploração de serviços e manipulação de logs dentro de ambientes AWS. Contribuições ou ideias para novos módulos são bem-vindas.

Para acompanhar os desenvolvimentos contínuos dos produtos AWS, projetamos o Pacu desde o início com a extensibilidade em mente. Uma sintaxe comum e estrutura de dados mantêm os módulos fáceis de construir e expandir - não há necessidade de especificar regiões AWS ou fazer verificações de permissão redundantes entre módulos. Um banco de dados SQLite local é usado para gerenciar e manipular dados recuperados, minimizando chamadas de API (e logs associados). Relatórios e auditoria de ataques também estão integrados na estrutura; o Pacu auxilia o processo de documentação através de registro e exportação de comandos, ajudando a construir uma linha do tempo para o processo de teste.

Link com os módulos: https://github.com/RhinoSecurityLabs/pacu/wiki/Module-Details
